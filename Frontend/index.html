<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ØªØ­Ù„ÙŠÙ„ Ø£ÙÙƒØ§Ø± Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            direction: rtl;
            text-align: center;
            padding: 0 15vw;
            background: #f0f0f0;
        }
        textarea {
            width: 80%;
            height: 150px;
            font-size: 16px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .white_text {
            color: #363636;
            font-size: clamp(10px, 2vw, 15px);
            margin: 10px 0;
        }
        p {
            color: #363636;
            font-size: clamp(10px, 2vw, 15px);
            margin: 10px 0;
        }
        .head {
            color: #8134EC;
            font-size: clamp(12px, 2vw, 20px);
            margin: 10px 0;
        }
        .market {
            margin: 20px 0;
            display: flex;
            justify-content: flex;
            direction: row;
            gap: 20px;
            flex-wrap: wrap;
        }
        .item {
            background-color: rgb(224, 228, 233);
            border-radius: 15px;
            padding: 1vw;
            flex: 1 1 10vw; /* responsive: min-width 250px, flexible */
            box-shadow: 0 2px 8px rgba(73, 73, 73, 0.3);
        }
        .box {
            justify-items: center;
            flex: 1 1 100px;
            background-color: rgb(224, 228, 233);
            border-radius: 15px;
            padding: 2vw;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(73, 73, 73, 0.3);
        }
        .boxes {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .circle {
            width: 7vw;
            height: 7vw;
            min-width: 60px;
            min-height: 60px;
            max-width: 10vw;
            max-height: 10vw;
            border-radius: 50%;
            background: conic-gradient(#363636 0% var(--percent), #d4d4d4 var(--percent) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto 12px auto;
            box-shadow: 0 2px 8px rgba(44,192,255,0.13);
            transition: box-shadow 0.2s, background 0.3s;
        }
        .circle::before {
            content: "";
            position: absolute;
            width: 60%;
            height: 60%; 
            background: rgb(224, 228, 233);
            border-radius: 50%;
        }
        .inner {
            position: relative;
            font-size: 1.3vw;
            font-weight: bold;
            color: #8134EC;
            z-index: 1;
        }
        @media (max-width: 700px) {
            .circle {
                width: 60px;
                height: 60px;
                min-width: 40px;
                min-height: 40px;
                max-width: 70px;
                max-height: 70px;
            }
            .inner {
                font-size: 1.1em;
            }
        }
        button {
            padding: 14px 36px;
            border-radius: 8px;
            font-size: 1.3em;
            background: #8134EC;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(73, 73, 73, 0.18);
            transition: background 0.3s, transform 0.2s;
        }
        button:hover {
            background: #8134EC;
            transform: translateY(-2px) scale(1.04);
        }
        .loading-spinner {
            width: 45px;
            height: 45px;
            border: 5px solid #d4d4d4;
            border-top: 5px solid #4cd964;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    {%if not data and not loading%}
    <h2 class="head">ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ ÙÙƒØ±Ø© Ø±ÙŠØ§Ø¯ÙŠØ©</h2>
    <p>Ø£Ø¯Ø®Ù„ ÙÙƒØ±ØªÙƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± ÙƒØ§Ù…Ù„ Ù„ÙÙƒØ±ØªÙƒ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ:</p>
    <form action="/submitted" method="POST">
        <textarea name="idea" placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±ØªÙƒ Ù‡Ù†Ø§..." required></textarea><br>
        <button type="submit">ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø©</button>
    </form>
    {% elif loading %}
    <h2 class="head">ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ ÙÙƒØ±Ø© Ø±ÙŠØ§Ø¯ÙŠØ©</h2>
    <p>ÙØ¶Ù„Ø§ Ù‚Ù… Ø¨Ø§Ù„Ø¥Ù†ØªØ¸Ø§Ø± ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙƒØ±Ø©</p>
    <div class="loading-spinner" style="display: block;"></div>
    <script>
        fetch("/waiting", {
            method: "POST"
        })
        .then(response => response.text())
        .then(html => {
            document.open();
            document.write(html);
            document.close();
        });
    </script>
    {% elif data %}
    <h2 class="head">ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ ÙÙƒØ±Ø© Ø±ÙŠØ§Ø¯ÙŠØ©</h2>
    <form action="/download" method="POST">
        <button type="download">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    </form>
    <div class="box" align="right">
        <p class="white_text"><strong>ğŸ’¡ Ø§Ù„ÙÙƒØ±Ø©: </strong>{{ data['idea analysis']['title'] }}</p>
        <p class="white_text"><strong>ğŸ“ ÙˆØµÙ Ø§Ù„ÙÙƒØ±Ø©: </strong>{{ data['idea analysis']['description'] }}</p>
        <p class="white_text"><strong>ğŸ¢ Ø§Ù„Ù‚Ø·Ø§Ø¹: </strong>{{ data['idea analysis']['title'] }}   -   {{ data['idea analysis']['niche'] }}</p>
    </div>
    <p class="white_text" align="right"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ: </strong>{{ data['idea analysis']['comment'] }}</p>
    <flex class="boxes">
        <div class="box" style="background-color: rgb(255,255,255,0) !important; box-shadow: none !important;">
            <h3 class="head" align="center">Ù†Ø³Ø¨Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
            <div class="circle" style="--percent: {{ data['audience']['acceptance_probability'] }}%;">
                <p class="inner">{{data['audience']['acceptance_probability']}}%</p>
            </div>
        </div>
        <div class="box" style="background-color: rgb(255,255,255,0) !important; box-shadow: none !important;">
            <h3 class="head" align="center">Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„ÙÙƒØ±Ø©</h3>
            <div class="circle" style="--percent: {{ data['final']['confidence'] }}%;">
                <p class="inner">{{data['final']['confidence']}}%</p>
            </div>
        </div>
    </flex>
    <flex class="market" align="center" direction="row">
        <div class="item">
            <p class="head"><strong>Ø§Ù„Ø­Ø¬Ù…</strong></p>
            <p>{{ data['market_analysis']['size'] }}</p>
        </div>
        <div class="item">
            <p class="head"><strong>Ø§Ù„Ø·Ù„Ø¨</strong></p>
            <p>{{ data['market_analysis']['demand'] }}</p>
        </div>
        <div class="item">
            <p class="head"><strong>Ø§Ù„ØªÙˆØ³Ø¹</strong></p>
            <p>{{ data['market_analysis']['growth'] }}</p>
        </div>
    </flex>
    <p align="right" class="white_text"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚: </strong>{{ data['market_analysis']['comment'] }}</p>
    <flex class="boxes">
        <div class="box">
            <h3 class="head" align="right">ğŸ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…</h3>
            {% for competitorname in data['competitors']['name'] %}
                <p align="right">ğŸ’  {{ competitorname }}</p>
            {% endfor %}
        </div>
        <div class="box">
            <h3 class="head" align="right">â­ Ø§Ù„Ù…Ø²Ø§ÙŠØ§ Ø§Ù„ØªÙŠ ÙŠÙ‚Ø¯Ù…Ù‡Ø§ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†</h3>
            {% for competitorfeature in data['competitors']['features'] %}
                <p align="right">ğŸ’  {{ competitorfeature }}</p>
            {% endfor %}
        </div>
    </flex>
    <flex class="boxes">
        <div class="box">
            <h3 class="head" align="right">ğŸ’ª Ù†Ù‚Ø§Ø· Ù‚ÙˆØ© Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†</h3>
            {% for strength in data['competitors']['strengths'] %}
                <p align="right">ğŸ’  {{ strength }}</p>
            {% endfor %}
        </div>
        <div class="box">
            <h3 class="head" align="right">ğŸŒ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†</h3>
            {% for weakness in data['competitors']['weaknesses'] %}
                <p align="right">ğŸ’  {{ weakness }}</p>
            {% endfor %}
        </div>
    </flex>
    <p align="right" class="white_text"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ù‚ÙˆØ© ÙˆÙ†Ù‚Ø§Ø· Ø¶Ø¹Ù Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†: </strong>{{ data['competitors']['comment'] }}</p>
    <div class="box">
        <h3 class="head" align="right">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†</h3>
        <p align="right">Ø§Ù„Ø¹Ù…Ø±: {{ data['audience']['age_range'] }}</p>
        <p align="right">Ø§Ù„Ø¯ÙˆÙ„Ø©: {{ data['audience']['country'] }}</p>
        <p align="right">Ø§Ù„Ø¬Ù†Ø³: {{ data['audience']['gender'] }}</p>
        <p align="right">Ù‚ÙˆØ© Ø§Ù„Ø´Ø±Ø§Ø¡: {{ data['audience']['buying_power'] }}</p>
        <p align="right">Ù†Ø³Ø¨Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„ÙÙƒØ±Ø©: {{ data['audience']['acceptance_probability'] }}</p>
    </div>
    <flex class="boxes">
        <div class="box">
            <h3 class="head" align="right">ğŸš€ Ø§Ù„ÙØ±Øµ</h3>
            {% for opportunities in data['opportunities']['possible'] %}
                <p align="right">ğŸ’  {{ opportunities }}</p>
            {% endfor %}
        </div>
        <div class="box">
            <h3 class="head" align="right">âš ï¸ Ø§Ù„Ù…Ø®Ø§Ø·Ø±</h3>
            {% for risks in data['risks']['possible'] %}
                <p align="right">ğŸ’  {{ risks }}</p>
            {% endfor %}
        </div>
    </flex>
    <p class="white_text" align="right"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ Ø­ÙˆÙ„ Ø§Ù„ÙØ±Øµ: </strong>{{ data['opportunities']['comment'] }}</p>
    <p class="white_text" align="right"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±: </strong>{{ data['risks']['comment'] }}</p>
    <div class="box">
        <h3 class="head" align="right">ğŸ’° Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
        <p align="right">ØªÙƒÙ„ÙØ© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©: {{ data['costs']['startup'] }}</p>
        <p align="right">Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©: {{ data['costs']['running'] }}</p>
    </div>
    <div class="box">
        <h3 class="head" align="right">ğŸ’° Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</h3>
        {% for costs in data['costs']['types'] %}
            <p align="right">ğŸ’  {{ costs }}</p>
        {% endfor %}
    </div>
    <p class="white_text" align="right"><strong>ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¥ØµØ·Ù†Ø§Ø¹ÙŠ Ø­ÙˆÙ„ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ: </strong>{{ data['costs']['comment'] }}</p>
    <div class="box">
        <h3 class="head" align="right">ğŸ“‹ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ©</h3>
        <p class="white_text" align="right">{{ data['final']['summary'] }}</p>
    </div>

    {% endif %}
    <p>ØªÙ… Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Ù‚Ø¨Ù„: ÙÙ‡Ø¯ Ø§Ù„Ø³ÙŠÙ</p>
</body>
</html>